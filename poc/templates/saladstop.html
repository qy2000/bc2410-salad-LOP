{% extends 'nouislider_libraries.html' %} 
{% block head %}
{{ super() }}
<link rel="stylesheet" href="{{ url_for('static', filename='main.css') }}">
{% endblock %}
{% block body %}
<!-- <div class="example">
 <div class="view">
     <p> noUiSliderber test </p><br><br>
 <div id="testslider" style="width:200px;"></div> -->
<!--  <br>
 <button id="read-button">read min-max</button>
 <br><br>
 minvalue<br>
 <span id="lower-value"></span><br>
 <span id="lower-offset"></span><br>
 maxvalue<br>
 <span id="upper-value"></span><br>
 <span id="upper-offset"></span><br> -->
<!-- <div class="form">
<div class="title">Welcome</div>
<div class="subtitle">Let's create your account!</div>
<div class="input-container ic1">
<input id="firstname" class="input" type="text" placeholder=" " />
<div class="cut"></div>
<label for="firstname" class="placeholder">First name</label>
</div>
<div class="input-container ic2">
<input id="lastname" class="input" type="text" placeholder=" " />
<div class="cut"></div>
<label for="lastname" class="placeholder">Last name</label>
</div>
<div class="input-container ic2">
<input id="email" class="input" type="text" placeholder=" " />
<div class="cut cut-short"></div>
<label for="email" class="placeholder">Email</label>
</div>
<button type="text" class="submit">submit</button>
</div> -->

<h1>Welcome to SaladStop!</h1>
<h2>Please indicate your preferences.</h2>
<form action="/" method = "POST">
{% for diet in injection["dietary_arr"] %}
<h4>{{diet['label']}}</h4>
<div class="slider_component">
    <div class="left_value value">
        <span name="min_{{diet['form']}}" id="{{diet['form']}}-lower-value"></span>
        <input type="hidden" name="min_{{diet['form']}}" id="{{diet['form']}}-input-lower-value" />
    </div>
    <div class="slider_component_itself_wrapper">
        <div id="{{diet['form']}}" class="slider_component_itself"></div>
    </div>
    <div class="right_value value">
        <span name="max_{{diet['form']}}" id="{{diet['form']}}-upper-value"></span>
        <input type="hidden" name="max_{{diet['form']}}" id="{{diet['form']}}-input-upper-value" />
    </div>
</div>
<script>
$('#{{diet["form"]}}').noUiSlider({
    start: [ parseInt('{{diet["min"]}}'), parseInt('{{diet["max"]}}') ],
    connect: true,
    range: {
        'min': parseInt('{{diet["min"]}}'),
        'max': parseInt('{{diet["max"]}}') 
    },
    step:  parseInt('{{diet["step"]}}')
});
$("#{{diet['form']}}").Link("lower").to($("#{{diet['form']}}-lower-value"));
$("#{{diet['form']}}").Link("lower").to($("#{{diet['form']}}-input-lower-value"));
$("#{{diet['form']}}").Link("upper").to($("#{{diet['form']}}-upper-value"));
$("#{{diet['form']}}").Link("upper").to($("#{{diet['form']}}-input-upper-value"));
</script>
{% endfor %}
<table border="1">
<tr><td colspan="3", align="center">Dietary Restrictions</td></tr>
<tr>
    <th></th>
    <th>Yes</th>
    <th colspan="1">No</th>
</tr>
<tr>
    <td>I am Vegan</td>
    <td colspan="1"><input type="checkbox" id="Vegan" name="dietary_req" value="1"></td>
    <td colspan="1"><input type="checkbox" id="Vegan" name="dietary_req" value="0"></td>
</tr>
<tr>
    <td>I am Vegetarian</td>
    <td colspan="1"><input type="checkbox" id="Vegetarian" name="dietary_req" value="1"></td>
    <td colspan="1"><input type="checkbox" id="Vegetarian" name="dietary_req" value="0"></td>
</tr>
<tr>
    <td>I want Gluten-Free options only</td>
    <td colspan="1"><input type="checkbox" id="Gluten" name="dietary_req" value="1"></td>
    <td colspan="1"><input type="checkbox" id="Gluten" name="dietary_req" value="0"></td>
</tr>
<tr>
    <td>I cannot take dairy</td>
    <td colspan="1"><input type="checkbox" id="Dairy" name="dietary_req" value="1"></td>
    <td colspan="1"><input type="checkbox" id="Dairy" name="dietary_req" value="0"></td>
</tr>
<tr>
    <td>I am allergic to nuts</td>
    <td colspan="1"><input type="checkbox" id="Nuts" name="dietary_req" value="1"></td>
    <td colspan="1"><input type="checkbox" id="Nuts" name="dietary_req" value="0"></td>
</tr>
<tr>
    <td>I cannot take spice</td>
    <td colspan="1"><input type="checkbox" id="Spice" name="dietary_req" value="1"></td>
    <td colspan="1"><input type="checkbox" id="Spice" name="dietary_req" value="0"></td>
</tr>

<h4>Minimum number of premium ingredients</h4>
<div class="slider_component">
    <div class="slider_component_itself_wrapper">
        <div id="mpt" class="slider_component_itself"></div>
    </div>
    <div class="right_value value">
        <span name="max_mpt" id="mpt-upper-value"></span>
        <input type="hidden" id="mpt-input-upper-value" name="Max_Premium_Toppings" />
    </div>
</div>
<script>
$('#mpt').noUiSlider({
    start: 10,
    connect: 'lower',
    range: {
        'min': 0,
        'max': 10
    },
    step: 1
});
$("#mpt").Link().to($("#mpt-upper-value"));
$("#mpt").Link().to($("#mpt-input-upper-value"));
</script>

<h4>Budget</h4>
<div class="slider_component">
    <div class="slider_component_itself_wrapper">
        <div id="budget" class="slider_component_itself"></div>
    </div>
    <div class="right_value value">
        <span name="max_budget" id="budget-upper-value"></span>
        <input type="hidden" id="budget-input-upper-value" name="Budget" />
    </div>
</div>
<script>
$('#budget').noUiSlider({
    start: 50,
    connect: 'lower',
    range: {
        'min': 0,
        'max': 50
    },
    step: 1
});
$("#budget").Link().to($("#budget-upper-value"));
$("#budget").Link().to($("#budget-input-upper-value"));
</script>

<tr>
<td colspan="3", align = "center"><input type="submit" value="Submit Preferences"></td>
</tr>
</tbody>
</table>
</form>

{% endblock %}
{% block footer %}
{% endblock %}


<!-- <link rel="stylesheet" href="{{ url_for('static', filename='nouislider.css') }}"></link>
<script src="{{ url_for('static', filename='nouislider.js') }}"></script>
<script type="module">
import noUiSlider from './static/nouislider.mjs';
var slider = document.getElementById('calories');

noUiSlider.create(slider, {
    start: [20, 80],
    connect: true,
    range: {
        'min': 0,
        'max': 100
    }
    
});
</script> -->